<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Financial Statements – StoxGear</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&amp;display=swap" rel="stylesheet"/>
<style>
/* ================= THEME (kept your structure, cleaned duplicates) ================= */
:root{
  --bg:#ffffff;
  --card:#ffffff;
  --ink:#141414;
  --text:#0f1220;
  --text-dim:#5e6676;
  --muted:#5f6573;

  --accent:#c9a646;
  --accent-2:#e6c463;

  --line:#e8e8e8;
  --radius:18px;
  --ring:rgba(201,166,70,.28);
  --maxw:1200px;
  --shadow:0 10px 28px rgba(0,0,0,.08);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background:var(--bg);
  font-family:Inter, sans-serif;
  color:var(--ink);
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
}

/* ================= DEVICE AWARE (PC vs Mobile) ================= */
/* JS will toggle these on <html> */
html.is-mobile body{ font-size:16px; }
html.is-desktop body{ font-size:16px; }

/* Reduce motion support */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration:0.001ms!important; animation-iteration-count:1!important; transition-duration:0.001ms!important; scroll-behavior:auto!important; }
}

/* ================= NAVBAR (your original, + small mobile polish) ================= */
.nx-navbar a{ text-decoration:none!important; }
.nx-navbar{
  position:sticky; top:0; z-index:1000;
  background:#fff;
  border-bottom:1px solid var(--line);
  box-shadow:0 6px 18px rgba(0,0,0,.06);
}
.nx-nav-inner{
  max-width:var(--maxw);
  margin:0 auto;
  padding:14px 24px;
  display:flex;
  align-items:center;
  gap:16px;
}
.nx-brand{ display:flex; align-items:center; gap:10px; color:var(--text); }
.nx-logo,.nx-logo2{ height:38px; width:auto; }
.nx-grow{ flex:1; }

.nx-cta{
  background:var(--accent);
  color:#000;
  font-weight:800;
  border:none;
  padding:10px 22px;
  border-radius:999px;
  cursor:pointer;
  transition:transform .25s, box-shadow .25s, filter .25s;
  box-shadow:0 8px 20px rgba(201,166,70,.22);
}
.nx-cta:hover{ transform:translateY(-1px); filter:saturate(1.05); box-shadow:0 14px 30px rgba(201,166,70,.28); }
.nx-cta:active{ transform:translateY(0px) scale(.99); }

.nx-toggle{
  display:none;
  background:#fff;
  border:1px solid var(--line);
  padding:6px 12px;
  border-radius:10px;
  font-size:20px;
  cursor:pointer;
}

.nx-menu{ display:flex; align-items:center; gap:26px; }
.nx-item{ position:relative; }
.nx-link{
  color:var(--text-dim);
  font-weight:700;
  position:relative;
}
.nx-link:hover{ color:var(--accent); }
.nx-link:after{
  content:"";
  position:absolute; left:0; bottom:-6px;
  width:0; height:2px;
  background:var(--accent);
  transition:.25s;
}
.nx-link:hover:after{ width:100%; }

.nx-drop{
  position:absolute;
  top:calc(100% + 10px);
  left:0;
  min-width:230px;
  background:#fff;
  border:1px solid var(--line);
  padding:10px;
  border-radius:var(--radius);
  display:none;
  box-shadow:0 12px 28px rgba(0,0,0,.12);
}
.nx-drop a{
  display:block;
  padding:8px 10px;
  color:var(--text);
  border-radius:10px;
}
.nx-drop a:hover{ background:#f6f6f6; color:var(--accent); }

@media(min-width:1025px){
  .nx-item:hover>.nx-drop{ display:block; }
}

/* Mobile Navbar */
@media(max-width:1024px){
  .nx-nav-inner{ padding:12px 14px; }
  .nx-logo,.nx-logo2{ height:34px; }
  .nx-cta{ display:none; } /* optional: keep header clean on mobile */
  .nx-toggle{ display:block; }
  .nx-menu{
    display:none;
    position:absolute;
    top:100%; left:0; right:0;
    background:#fff;
    border-top:1px solid var(--line);
    flex-direction:column;
    box-shadow:0 12px 26px rgba(0,0,0,.08);
    padding:10px 12px;
    gap:10px;
  }
  .nx-navbar.is-open .nx-menu{ display:flex; }

  .nx-item{ width:100%; }
  .nx-link{ display:block; width:100%; padding:10px 10px; border-radius:12px; }
  .nx-link:hover{ background:#fbfbfb; }
  .nx-link:after{ display:none; }

  .nx-drop{ position:static; border:none; box-shadow:none; background:none; padding:0; display:none; }
  .nx-item.open>.nx-drop{ display:block; }
}

/* ================= FINANCIAL CARDS SECTION ================= */
.section-wrap{
  max-width:var(--maxw);
  margin:110px auto 60px;
  padding:0 20px;
}

/* Mobile: reduce huge top gap + typography */
@media (max-width:768px){
  .section-wrap{ margin:28px auto 40px; padding:0 14px; }
}

.section-title{
  font-size:42px;
  font-weight:800;
  color:var(--accent);
  margin:0 0 10px;
  letter-spacing:-0.02em;
}
.section-sub{ color:var(--muted); margin:0 0 28px; line-height:1.5; }

@media (max-width:768px){
  .section-title{ font-size:30px; }
  .section-sub{ margin-bottom:18px; }
}

.card-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(260px,1fr));
  gap:24px;
}
@media (max-width:540px){
  .card-grid{ grid-template-columns:1fr; gap:14px; }
}

/* ================= ANIMATIONS (nice + light) ================= */
@keyframes floatIn{
  from{ opacity:0; transform:translateY(14px) scale(.985); }
  to{ opacity:1; transform:translateY(0) scale(1); }
}
@keyframes fadeDown{
  from{ opacity:0; transform:translateY(10px); }
  to{ opacity:1; transform:translateY(0); }
}
@keyframes shine{
  0%{ transform:translateX(-120%) rotate(12deg); opacity:.0; }
  25%{ opacity:.18; }
  60%{ opacity:.0; }
  100%{ transform:translateX(220%) rotate(12deg); opacity:0; }
}

/* CARD */
.year-card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:18px;
  padding:24px;
  text-align:center;
  cursor:pointer;
  transition:transform .25s, box-shadow .25s, border-color .25s, background .25s;
  box-shadow:var(--shadow);
  position:relative;
  overflow:hidden;

  /* animated entry */
  opacity:0;
  transform:translateY(12px);
}
.year-card.is-visible{
  animation:floatIn .55s cubic-bezier(.2,.9,.2,1) both;
}
.year-card:focus-within{
  outline:3px solid var(--ring);
  outline-offset:2px;
}
.year-card:hover{
  transform:translateY(-6px);
  border-color:var(--accent);
  box-shadow:0 18px 40px rgba(0,0,0,.18);
}

/* subtle sheen */
.year-card::before{
  content:"";
  position:absolute;
  top:-40%;
  left:-60%;
  width:55%;
  height:180%;
  background:linear-gradient(90deg, transparent, rgba(201,166,70,.35), transparent);
  transform:translateX(-120%) rotate(12deg);
  opacity:0;
  pointer-events:none;
}
.year-card:hover::before{
  animation:shine 1.1s ease-in-out;
}

/* headline */
.year-card h2{
  font-size:32px;
  font-weight:800;
  color:var(--accent);
  margin:0;
}

/* EXPANDED TABS (animated height using max-height) */
.tabs{
  margin-top:16px;
  padding-top:14px;
  border-top:1px solid var(--line);

  max-height:0;
  overflow:hidden;
  opacity:0;
  transform:translateY(6px);
  transition:max-height .35s ease, opacity .25s ease, transform .35s ease;
}

.year-card.active .tabs{
  max-height:520px; /* enough for your links */
  opacity:1;
  transform:translateY(0);
}

/* LINKS */
.tab-btn{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  padding:10px 0;
  font-size:16px;
  font-weight:700;
  color:var(--ink);
  text-decoration:none;
  border-bottom:1px solid transparent;
  transition:color .2s, border-color .2s, transform .2s, background .2s;
  border-radius:10px;
}
.tab-btn:hover{
  color:var(--accent);
  border-bottom:1px solid var(--accent);
  transform:translateY(-1px);
  background:rgba(201,166,70,.08);
}

/* ACTIVE CARD */
.year-card.active{
  border-color:var(--accent);
  box-shadow:0 18px 40px rgba(0,0,0,.2);
}

/* Make cards more tappable on mobile */
html.is-mobile .year-card{ padding:20px; }
html.is-mobile .tab-btn{ padding:12px 10px; }

/* ================= FOOTER (your original) ================= */
.nx-footer{ margin-top:40px; background:#fafafa; border-top:1px solid var(--line); color:var(--text-dim); }
.nx-foot-wrap{ max-width:var(--maxw); margin:0 auto; padding:48px 20px 30px; }
.nx-foot-top{ display:flex; align-items:center; gap:16px; padding-bottom:20px; border-bottom:1px solid var(--line); }
.nx-foot-brand{ display:flex; align-items:center; gap:12px; color:var(--text); }
.nx-foot-logo{ height:38px; width:auto; }
.nx-foot-grid{ display:grid; grid-template-columns:repeat(4,1fr); gap:26px; padding:26px 0 10px; }
@media(max-width:900px){ .nx-foot-grid{ grid-template-columns:repeat(2,1fr); } }
@media(max-width:540px){
  .nx-foot-wrap{ padding:34px 14px 22px; }
  .nx-foot-grid{ grid-template-columns:1fr; }
}
.nx-foot-col h4{ font-size:15px; color:var(--accent); margin-bottom:10px; }
.nx-foot-col a{ color:var(--text); padding:6px 0; display:block; opacity:.9; transition:.2s; }
.nx-foot-col a:hover{ opacity:1; transform:translateX(2px); }
.nx-foot-bottom{
  padding-top:16px;
  border-top:1px solid var(--line);
  font-size:13px;
  display:flex;
  justify-content:space-between;
  flex-wrap:wrap;
  gap:10px;
  color:var(--text-dim);
}


    /* ================= MOBILE RESPONSIVE PATCH (GLOBAL) ================= */
    /* Keep content unchanged — only improves small-device behavior */

    html, body { overflow-x: hidden; }

    :root{
      --safeL: max(14px, env(safe-area-inset-left));
      --safeR: max(14px, env(safe-area-inset-right));
    }

    .container{
      padding-left: var(--safeL) !important;
      padding-right: var(--safeR) !important;
    }

    /* NAV: prevent brand overflow on very small screens */
    .nx-brand{ min-width:0; max-width:72%; }
    .nx-logo, .nx-logo2{ max-width:100%; }
    @media (max-width:420px){ .nx-logo2{ display:none; } }

    /* MOBILE MENU: use viewport height + allow scrolling inside */
    @media (max-width:1024px){
      .nx-menu{
        max-height: calc(100vh - 64px);
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        overscroll-behavior: contain;
        padding-bottom: 14px;
        border-radius: 0 0 18px 18px;
      }

      /* wrap long labels */
      .nx-link, .nx-drop a{
        white-space: normal;
        word-break: break-word;
      }

      /* smooth dropdown open/close without touching HTML */
      .nx-drop{
        display:block;       /* participate */
        max-height:0;        /* collapsed */
        opacity:0;
        overflow:hidden;
        transition: max-height .35s ease, opacity .25s ease;
        padding: 0;
        margin: 0;
      }
      .nx-item.open > .nx-drop{
        max-height: 900px;
        opacity: 1;
        padding: 6px 0 0;
      }
    }

    /* Small phones: button full width, slower ticker */
    @media (max-width:540px){
      .btn{ width:100%; justify-content:center; }
      .hero__inner{ gap:18px; }
      .hero p{ font-size:15px; }
      .ticker__row{ animation-duration:42s !important; }
    }

    /* Pause ticker on hover/touch */
    .ticker:hover .ticker__row,
    .ticker:active .ticker__row{ animation-play-state: paused; }

    /* Lock background scroll when menu open (JS toggles this class) */
    body.nav-locked{ overflow:hidden; touch-action:none; }
    /* ================= END MOBILE RESPONSIVE PATCH (GLOBAL) ================= */

  

    /* === MOBILE_RESPONSIVE_PATCH v1 (do not remove) === */
    html, body { overflow-x: hidden; }
    
    /* safe area padding for notches */
    :root{
      --safeL: max(14px, env(safe-area-inset-left));
      --safeR: max(14px, env(safe-area-inset-right));
    }
    
    /* containers: prevent edge clipping on small devices */
    .container{
      padding-left: var(--safeL) !important;
      padding-right: var(--safeR) !important;
    }
    
    /* NAV: prevent logo/menu overflow */
    .nx-brand{ min-width:0; max-width:72%; }
    .nx-logo,.nx-logo2{ max-width:100%; }
    
    /* hide partner logo on very small phones */
    @media (max-width:420px){
      .nx-logo2{ display:none !important; }
    }
    
    /* Mobile menu: scroll inside + safe height */
    @media (max-width:1024px){
      .nx-menu{
        max-height: calc(100vh - 64px);
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        overscroll-behavior: contain;
        padding-bottom: 14px;
        border-radius: 0 0 18px 18px;
      }
    
      /* wrap long nav labels */
      .nx-link, .nx-drop a{
        white-space: normal;
        word-break: break-word;
      }
    
      /* Smooth dropdown accordion (works with existing .nx-item.open toggles) */
      .nx-drop{
        display:block !important;
        max-height:0;
        opacity:0;
        overflow:hidden;
        transition:max-height .35s ease, opacity .25s ease;
        padding:0 !important;
        margin:0 !important;
      }
      .nx-item.open > .nx-drop{
        max-height: 1200px;
        opacity: 1;
        padding-top: 6px !important;
      }
    }
    
    /* HERO & CTA: full width buttons on small phones */
    @media (max-width:540px){
      .btn{ width:100%; justify-content:center; }
      .hero__inner{ gap:18px; }
      .hero p{ font-size:15px; }
    }
    
    /* Ticker: slower on mobile + pause on touch/hover */
    @media (max-width:540px){
      .ticker__row{ animation-duration:42s !important; }
    }
    .ticker:hover .ticker__row,
    .ticker:active .ticker__row{
      animation-play-state: paused;
    }
    
    /* lock background scroll when menu open (JS syncs this class) */
    body.nav-locked{
      overflow:hidden;
      touch-action:none;
    }
    /* === END MOBILE_RESPONSIVE_PATCH v1 === */
  </style>
<link href="assets/stoxgear-pro.css" rel="stylesheet"/>  <link rel="stylesheet" href="assets/cm-enhance.css">
</head>
<body data-page="annaual half yearly.html">
<!-- ========== NAVBAR ========== -->
<header class="nx-navbar" id="nxHeader">
<div class="nx-nav-inner">
<a aria-label="StoxGear Home" class="nx-brand" href="index.html">
<img alt="StoxGear" class="nx-logo" src="stoxgear-logo.jpg"/>
<img alt="Partner" class="nx-logo2" src="WhatsApp Image 2025-10-18 at 10.34.53_ed0e28f6.jpg"/>
</a>
<div class="nx-grow"></div>
<nav aria-label="Primary navigation" class="nx-menu" id="nxMenu">
<div class="nx-item">
<a class="nx-link" data-dd="dd-why" href="#">Why Us</a>
<div class="nx-drop" id="dd-why">
<a href="about.html">About Us</a>
<a href="BOARD of directors.html">Board / Management</a>
<a href="Mission.html">Mission &amp; Vision</a>
<a href="associated companies.html">Associated Companies</a>
<a href="Ncb auditor details .html">Auditors / Legal Advisors</a>
<a href="services.html">Services</a>
<a href="Registered agents..html">Registered Agents</a>
</div>
</div>
<div class="nx-item">
<a class="nx-link" data-dd="dd-edu" href="#">Education</a>
<div class="nx-drop" id="dd-edu">
<a href="New to trading.html">New to Trading</a>
<a href="Investorguid.html">Investor Guide</a>
<a href="Glossary.html">Glossary</a>
<a href="psx-rule-book.html">PSX Rule Book</a>
<a href="common-terms-share-market.html">Common Terms of Share Market</a>
<a href="online-order-execution-flow.html">Order Execution Flow</a>
<a href="order-settlement-flow.html">Order Settlement Flow</a>
<a href="arbitration-procedure.html">Arbitration Procedure</a>
<a href="risk-disclosure-document.html">Risk Disclosure Document</a>
<a href="procedure-cancel-pending-orders.html">Cancel Pending Orders</a>
<a href="faqs.html">FAQs</a>
</div>
</div>
<div class="nx-item">
<a class="nx-link" data-dd="dd-open" href="#">Open Account</a>
<div class="nx-drop" id="dd-open">
<a href="Rda.html">Roshan Digital Account</a>
<a href="Acoocint opening.html">Open Digital Account</a>
<a href="DMANAGE FUDNDS.HTML">Manage Funds</a>
</div>
</div>
<div class="nx-item">
<a class="nx-link" data-dd="dd-dl" href="#">Downloads</a>
<div class="nx-drop" id="dd-dl">
<a href="Forms.html">Forms</a>
<a href="software.html">Software</a>
<a href="Annaual half yearly.html">Financial Statements</a>
<a href="KYC poslicy.html">CDD / KYC Policy</a>
</div>
</div>
<div class="nx-item">
<a class="nx-link" data-dd="dd-sup" href="#">Support</a>
<div class="nx-drop" id="dd-sup">
<a href="investor complaint.html">Investor Complaint</a>
<a href="Pending investor complaun.html">Pending Complaints</a>
<a href="Penal action.html">Penal Action</a>
<a href="Secp complaint.html">SECP Complaint</a>
<a href="psx complaint.html">PSX Complaint</a>
<a href="UIs of NICCPL.html">UIS Services</a>
<a href="Eservices By CDC.html">EServices by CDC</a>
</div>
</div>
<div class="nx-item">
<a class="nx-link" href="Contact.html">Contact</a>
</div>
</nav>
<button class="nx-cta" type="button">OPEN AN ACCOUNT</button>
<button aria-expanded="false" aria-label="Open menu" class="nx-toggle" id="nxToggle">☰</button>
</div>
</header>
<!-- ========== FINANCIAL CARDS ========== -->
<main class="section-wrap">
<h1 class="section-title">Financial Statements</h1>
<p class="section-sub">Select a year to expand and download reports.</p>
<div aria-live="polite" class="card-grid" id="finGrid"></div>
</main>
<!-- ========== FOOTER ========== -->
<footer class="nx-footer">
<div class="nx-foot-wrap">
<div class="nx-foot-top">
<a class="nx-foot-brand" href="index.html">
<img alt="StoxGear Logo" class="nx-foot-logo" src="stoxgear-logo.jpg"/>
<img alt="StoxGear Mark" class="nx-foot-logo" src="WhatsApp Image 2025-10-18 at 10.34.53_ed0e28f6.jpg"/>
</a>
</div>
<div class="nx-foot-grid">
<div class="nx-foot-col"><h4>WHY US</h4><a href="about.html">About Us</a><a href="BOARD of directors.html">Board</a></div>
<div class="nx-foot-col"><h4>EDUCATION</h4><a href="Glossary.html">Glossary</a><a href="faqs.html">FAQs</a></div>
<div class="nx-foot-col"><h4>ACCOUNT</h4><a href="Acoocint opening.html">Open Digital Account</a></div>
<div class="nx-foot-col"><h4>CONTACT</h4>
<a href="mailto:info@stoxgear.com.pk">info@stoxgear.com.pk</a>
<a href="tel:0913168395">091-3168395</a>
</div>
</div>
<div class="nx-foot-bottom">
<span>© <script>
/* DEVICE DETECTION (PC vs Mobile) */
(function(){
  const root = document.documentElement;
  function detect(){
    const coarse = window.matchMedia && window.matchMedia('(pointer: coarse)').matches;
    const small  = window.matchMedia && window.matchMedia('(max-width: 768px)').matches;
    const uaMob  = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    const isMobile = coarse || small || uaMob;
    root.classList.toggle('is-mobile', isMobile);
    root.classList.toggle('is-desktop', !isMobile);
  }
  detect();
  window.addEventListener('resize', detect, {passive:true});
})();

document.write(new Date().getFullYear())</script> StoxGear Securities (Pvt) Ltd</span>
<span><a href="privacy.html">Privacy</a> · <a href="terms.html">Terms</a></span>
</div>
</div>
</footer>
<script>
/* ================= DEVICE DETECTION (PC vs Mobile) =================
   Adds classes to <html>: is-mobile / is-desktop
   Also toggles if user resizes to a small width.
*/
/* MOBILE NAV + DROPDOWN TAP (UPGRADED) */
(function(){
  const header = document.getElementById('nxHeader');
  const menu   = document.getElementById('nxMenu');
  const toggle = document.getElementById('nxToggle');
  if(!header || !menu || !toggle) return;

  const isMobile = () => window.matchMedia('(max-width:1024px)').matches;

  function closeMenu(){
    header.classList.remove('is-open');
    toggle.setAttribute('aria-expanded','false');
    document.body.classList.remove('nav-locked');
    menu.querySelectorAll('.nx-item.open').forEach(i => i.classList.remove('open'));
  }

  function openMenu(){
    header.classList.add('is-open');
    toggle.setAttribute('aria-expanded','true');
    document.body.classList.add('nav-locked');
  }

  toggle.addEventListener('click', ()=>{
    const open = header.classList.contains('is-open');
    if(open) closeMenu(); else openMenu();
  });

  // Dropdown tap on mobile (supports data-dd OR next sibling .nx-drop)
  menu.addEventListener('click', (e)=>{
    const link = e.target.closest('.nx-link');
    if(!link) return;

    const mobile = isMobile();
    const next = link.nextElementSibling;
    const hasDrop = next && next.classList && next.classList.contains('nx-drop');
    const hasDataDd = link.hasAttribute('data-dd') || link.getAttribute('data-dd');

    if(mobile && (hasDrop || hasDataDd)){
      e.preventDefault();
      const item = link.closest('.nx-item');
      if(!item) return;
      menu.querySelectorAll('.nx-item.open').forEach(i => { if(i !== item) i.classList.remove('open'); });
      item.classList.toggle('open');
    }
  });

  // Click outside closes (mobile only)
  document.addEventListener('click', (e)=>{
    if(!isMobile()) return;
    if(!header.contains(e.target)) closeMenu();
  });

  // Resizing to desktop: reset
  window.addEventListener('resize', ()=>{
    if(!isMobile()) closeMenu();
  }, {passive:true});
})();


/* ================= FINANCIAL CARDS ================= */
const years = [2025];
const container = document.getElementById("finGrid");

years.forEach((y, idx) => {
  const card = document.createElement("div");
  card.className = "year-card";
  card.setAttribute("role","button");
  card.setAttribute("tabindex","0");
  card.setAttribute("aria-expanded","false");

  card.innerHTML = `
    <h2>${y}</h2>
    <div class="tabs">
      <a class="tab-btn" target="_blank" href="financials/2025/annual.pdf" rel="noopener">Annual Report</a>
      <a class="tab-btn" target="_blank" href="financials/2025/half.pdf" rel="noopener">Half-Yearly</a>
      <a class="tab-btn" target="_blank" href="financials/2025/q1.pdf" rel="noopener">Quarter 1</a>
      <a class="tab-btn" target="_blank" href="financials/2025/q2.pdf" rel="noopener">Quarter 2</a>
      <a class="tab-btn" target="_blank" href="financials/2025/q3.pdf" rel="noopener">Quarter 3</a>
      <a class="tab-btn" target="_blank" href="financials/2025/q4.pdf" rel="noopener">Quarter 4</a>
    </div>
  `;
  container.appendChild(card);

  // staggered animation delay
  card.style.animationDelay = (idx * 70) + "ms";
});

/* Animate cards when they enter viewport */
(function(){
  const cards = document.querySelectorAll(".year-card");
  const io = new IntersectionObserver((entries) => {
    entries.forEach(ent => {
      if(ent.isIntersecting){
        ent.target.classList.add("is-visible");
        io.unobserve(ent.target);
      }
    });
  }, { threshold: 0.12 });

  cards.forEach(c => io.observe(c));
})();

/* Expand / collapse behavior:
   - Click card body toggles
   - Clicking a link does NOT collapse
   - Keyboard Enter/Space toggles
*/
function collapseAll(){
  document.querySelectorAll(".year-card").forEach(c => {
    c.classList.remove("active");
    c.setAttribute("aria-expanded","false");
  });
}

document.addEventListener("click", (e) => {
  const link = e.target.closest(".tab-btn");
  if(link) return;

  const card = e.target.closest(".year-card");
  if(!card) return;

  const isActive = card.classList.contains("active");
  collapseAll();

  if(!isActive){
    card.classList.add("active");
    card.setAttribute("aria-expanded","true");

    // small haptic-like feedback on mobile (visual)
    card.animate(
      [{ transform:"translateY(-2px) scale(1.01)" }, { transform:"translateY(0) scale(1)" }],
      { duration:180, easing:"ease-out" }
    );
  }
});

document.addEventListener("keydown", (e) => {
  const card = document.activeElement && document.activeElement.classList.contains("year-card")
    ? document.activeElement
    : null;
  if(!card) return;

  if(e.key === "Enter" || e.key === " "){
    e.preventDefault();
    card.click();
  }
  if(e.key === "Escape"){
    collapseAll();
    card.blur();
  }
});
</script>
<script defer="True" src="assets/stoxgear-pro.js"></script>
  <script>
// === MOBILE_RESPONSIVE_PATCH v1 (do not remove) ===
(function(){
  const header = document.getElementById('nxHeader');
  const toggle = document.getElementById('nxToggle');
  const menu   = document.getElementById('nxMenu');
  if(!header) return;

  const isMobile = () => window.matchMedia && window.matchMedia('(max-width:1024px)').matches;

  // Sync body lock with menu open state (does NOT toggle, only sync)
  const syncLock = () => {
    const open = header.classList.contains('is-open') && isMobile();
    document.body.classList.toggle('nav-locked', open);
  };

  // after any toggle click, sync lock
  if(toggle){
    toggle.addEventListener('click', ()=> setTimeout(syncLock, 0));
  }

  // close menu if switching to desktop width
  window.addEventListener('resize', ()=>{
    if(!isMobile()){
      header.classList.remove('is-open');
      document.body.classList.remove('nav-locked');
      toggle && toggle.setAttribute('aria-expanded','false');
      menu && menu.querySelectorAll('.nx-item.open').forEach(i => i.classList.remove('open'));
    }else{
      syncLock();
    }
  }, {passive:true});

  // click outside closes on mobile (if page doesn't already)
  document.addEventListener('click', (e)=>{
    if(!isMobile()) return;
    if(!header.contains(e.target)){
      header.classList.remove('is-open');
      document.body.classList.remove('nav-locked');
      toggle && toggle.setAttribute('aria-expanded','false');
      menu && menu.querySelectorAll('.nx-item.open').forEach(i => i.classList.remove('open'));
    }
  });

  // initial
  syncLock();
})();
// === END MOBILE_RESPONSIVE_PATCH v1 ===
  </script>

  <script defer src="assets/cm-enhance.js"></script>
</body>
</html>
